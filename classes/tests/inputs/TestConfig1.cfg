#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
service {
    keyDirectory = "/usr/local/etc/mclogd";
};

#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
loopback {
    listenV4 = false;
    listenV6 = true;
    port = 3737;
};

filters {
    apps = "ident = /mcblock|mccurtain|mcrover|mctally|qmcrover/";
    daemons = "ident = /dwmrdapd|mcroverd|mctallyd|mccurtaind|mcblockd/";
    myhosts = "host = /.+\.(mcplex\.net|rfdm\.com)/";
    myapps = "($apps) && ($myhosts)";
    mydaemons = "($daemons) && ($myhosts)";
    mclogd = "ident = 'mclogd'";
};

#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
multicast {
    #--------------------------------------------------------------------------
    #  For IPv4, we need the interface address and the multicast group address.
    #--------------------------------------------------------------------------
    intfAddr = "192.168.168.42";
    groupAddr = "239.108.111.103";
    
    #--------------------------------------------------------------------------
    #  For IPv6, we need the interface address, the multicast group address
    #  and the interface name.
    #--------------------------------------------------------------------------
    intfAddr6 = "fd60:3019:f4a:6aaf::39";
    groupAddr6 = "ff02::006d:636c:6f67";
    intfName = "en0";
    
    #--------------------------------------------------------------------------
    #  We use the same destination port for IPv4 and IPv6.
    #--------------------------------------------------------------------------
    port = 3456;

    #--------------------------------------------------------------------------
    #  If present, output multicast will only be sent for messages which
    #  match the given filter.  If not present, all messages received on
    #  loopback will be sent.
    #--------------------------------------------------------------------------
    outFilter = "($mydaemons) || ($myapps)";
};

#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
files {
    logDirectory = "/usr/local/var/logs";

    logs {
        { filter = "$mydaemons"; path = "%H/%I"; perms = 0644; keep = 7;
            period = 5m; user="dwm"; group="dwm"; compress="bzip2"; },
        { filter = "$myapps";    path = "%H/myapps"; perms = 0600; keep = 7;
          period = 5m; }
    };
    
};
